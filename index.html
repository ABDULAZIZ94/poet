<!DOCTYPE html>
<html>
	<head>
		<title>Poet -- node.js blogging platform</title>
		<link rel="stylesheet" href="styles/poet.css" />
		<link rel="stylesheet" href="styles/prettify.css" />
		<link href='http://fonts.googleapis.com/css?family=La+Belle+Aurore' rel='stylesheet' type='text/css'>
		<script src="js/ga.js"></script>
	</head>
	<body>
		<div class="header">
			<div class="wrap">
				<a href="http://github.com/jsantell/poet">
					<h1>Poet</h1>
					<h2>write your code love poem</h2>
				</a>
			</div>
		</div>
		<div class="wrap">
			<div class="cartoon"></div>
			<div class="section">
				<h2>What is Poet?</h2>
				<p><a href="http://github.com/jsantell/poet" title="Poet"><strong>Poet</strong></a> is a blog generator in <a href="http://nodejs.org" title="node.js">node.js</a> to generate routing, render markdown posts, and get a blog up and running <em>fast</em>. Poet may not make you blog-famous, and it may give you one less excuse for not having a blog, but just imagine the insane hipster cred you get for having node power your blog. <em>"Cool blog, is this Wordpress or something?"</em> your square friend asks. <em>"Nah dude, this is in node,"</em> you respond, while skateboarding off into the sunset, doing mad flips and stuff. Little do they know you just used Poet's autoroute generation to get your content in, like, seconds, up on that internet.</p>
			</div>
			<div class="section">
				<h2>Getting Started</h2>
				<p>First thing first, throw <strong>Poet</strong> into your express app's package.json, or just install it locally with:</p>
				<pre>npm install poet</pre>
				<p>Once you have the <strong>Poet</strong> module in your app, just call it and pass in your express server and use some autorouting methods. Now you just need to make some posts and you're good to go!</p>
				<pre>
var
  express = require('express'),
  poet    = require('poet'),
  app     = express.createServer();

poet( app )
  .createPostRoute()
  .createPageRoute()
  .createTagRoute()
  .createCategoryRoute()
  .init();
				</pre>
				<p>You can also pass in some configuration options, and specify a callback in the <em>init</em> method once all your posts are loaded up. All the locals/middleware functions and stores are passed into the init function for modification or use. Below are the config defaults:</p>
				<pre>
var
  express = require('express'),
  poet    = require('poet'),
  app     = express.createServer();

poet( app, {
  posts: './_posts/',  // Directory of posts
  postsPerPage: 5,     // Posts per page in pagination
  metaFormat: 'json'   // meta formatter for posts
})
  .createPostRoute()
  .createPageRoute()
  .createTagRoute()
  .createCategoryRoute()
  .init(function ( locals ) {
	// Some callback to run once everything is set up
	// The core storage is passed in as an argument, where all
	// the locals/middleware functions and stores can be altered
  });
				</pre>
			</div>
			<div class="section">
				<h2>Posts</h2>
				<p>Posts are constructed in markdown, prefixed by front matter via <a href="https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter" title="YAML Front Matter">YAML</a> or <a href="https://github.com/jsantell/node-json-front-matter" title="JSON Front Matter">JSON</a>. All attributes are stored in the posts object. An example of a blog post formatted with JSON Front Matter is below:</p>
				<pre>
{{{
	"title" : "Hello World.js",
	"tags"  : [ "blog", "fun" ],
	"category" : "javascript",
	"date" : "8-9-2012"
}}}

Here goes the content that belongs to the blog post.
Blawg blawg blawg blawg.
				</pre>
				<p>With autoroutes, the name of the file is the slug used in the route.</p>
			</div>
			<div class="section">
				<h2>Routing</h2>
				<p>The methods autogenerate routes for individual posts, post lists, tags and categories. You can choose to use the generated routes, configure the generated routes, or just use your own. Each generator takes a route and a view file as their arguments -- below are the methods and their default routes and views.</p>
				<ul class="methods">
					<li><strong>createPostRoute( '/post/:post', 'post' )</strong></li>
					<li><strong>createPageRoute( '/page/:page', 'page' )</strong></li>
					<li><strong>createTagRoute( '/tag/:tag', 'tag' )</strong></li>
					<li><strong>createCategoryRoute( '/category/:category', 'category' )</strong></li>
				</ul>
				<p>For examples, check out the repo for demos using the <a href="https://github.com/jsantell/poet/blob/master/examples/defaultSetup.js" title="Default Routing">default routing</a>, <a href="https://github.com/jsantell/poet/blob/master/examples/configuredSetup.js">configured autogenerated routes</a>, and <a href="https://github.com/jsantell/poet/blob/master/examples/customRoutes.js" title="custom routes">hand-made custom routes</a>.</p>
			</div>
			<div class="section">
				<h2>Locals</h2>
				<p>The following variables and functions are exposed to all views.</p>
				<ul class="methods">
					<li><strong>postList</strong> - an array of reverse chronologically ordered post objects</li>
					<li><strong>getPostCount()</strong> - function to return the number of posts on the blog</li>
					<li><strong>getPost( title )</strong> - function to return the post object by post title/slug</li>
					<li><strong>getPosts( from, to )</strong> - function to return an array of posts, specified by the inclusive range based off of the index of the reverse chronological post array</li>
					<li><strong>tagList</strong> - an array of tag names</li>
					<li><strong>postsWithTag( tag )</strong> - function to return an array of posts with specified tag</li>
					<li><strong>tagUrl( tag )</strong> - function to return the URL of the tag view for corresponding tag</li>
					<li><strong>categoryList</strong> - an array of category names</li>
					<li><strong>postsWithCategory( category )</strong> - function to return an array of posts with specified category</li>
					<li><strong>categoryUrl( category )</strong> - function to return the URL of the category view for corresponding category</li>
					<li><strong>getPageCount()</strong> - function to return the number of pages, determined by post count and postsPerPage</li>
					<li><strong>pageUrl( pageNum )</strong> - function to return the URL of the page view for corresponding page number</li>
				</ul>
				<p>Using the route generators, additional locals are passed in on specific pages:</p>
				<h3>Post Locals</h3>
				<p>When on a specific post's page, all the post's metadata specified in the front-matter is exposed in the <em>post</em> object as well as the following:</p>
				<ul class="methods">
					<li><strong>post.url</strong> - The url of the post</li>
					<li><strong>post.content</strong> - The body of the post</li>
					<li><strong>post.preview</strong> - If a preview property was used in the front-matter, this will be the markdown formatted preview -- otherwise, it's the body of the post up to the first new line character</li>
				</ul>

				<h3>Page Locals</h3>
				<p>When on a page of posts..</p>
				<ul class="methods">
					<li><strong>posts</strong> - An array of all post objects that are within the current post range</li>
					<li><strong>page</strong> - The number of the current page</li>
				</ul>

				<h3>Tag Locals</h3>
				<p>When on a tag page..</p>
				<ul class="methods">
					<li><strong>posts</strong> - An array of all posts that have the current tag</li>
					<li><strong>tag</strong> - A string of the current tag's name</li>
				</ul>

				<h3>Category Locals</h3>
				<p>When on a category page..</p>
				<ul class="methods">
					<li><strong>posts</strong> - An array of all post objects that belong to the current category</li>
					<li><strong>category</strong> - A string of the current category's name</li>
				</ul>
			</div>
			<div class="section">
				<h2>Middleware</h2>
				<p>You can also use all the non-page specific locals in your routes, especially useful when defining your own custom routes. Use the <em>middleware</em> method when setting up your express app like so:</p>
				<pre>
app.configure(function () {
  app.use( express.static( __dirname + '/public' ));
  app.use( poet.middleware() );
  app.use( app.router );
});
				</pre>
				<p>This exposes all the locals to the <em>request</em> object under the <em>poet</em> namespace.</p>
				<p>Also check out the <a href="https://github.com/jsantell/poet/blob/master/examples/customRoutes.js" title="custom routes">custom routes example</a> to see an example of attaching the middleware and using the locals in routes.</p>
			</div>
			<div class="section">
				<h2>Get Bloggin'!</h2>
				<p>Time to start writing your sweet, beautiful words. For more development information, check out the <a href="http://github.com/jsantell/poet" title="Poet repository">repository</a>, or scope out the examples in there to get a better idea. If you have any comments, questions, or suggestions, hit me up <a href="http://twitter.com/jsantell" title="Jordan Santell on Twitter">@jsantell</a>!</p>
			</div>
		</div>
		<script src="js/prettify.js"></script>
		<script>
			prettyPrint();
		</script>
		<a href="https://github.com/jsantell/poet"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
	</body>
</html>
